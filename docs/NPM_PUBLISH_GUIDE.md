# npmå‘å¸ƒæŒ‡å—

## ğŸš€ æ¦‚è¿°

æœ¬æŒ‡å—æè¿°äº†å¦‚ä½•å°†ClawdbotæŠ€èƒ½å‘å¸ƒåˆ°npm registryï¼Œä½¿æŠ€èƒ½å¯ä»¥è¢«å…¶ä»–å¼€å‘è€…é€šè¿‡npmå®‰è£…å’Œä½¿ç”¨ã€‚

## ğŸ“‹ å‘å¸ƒæµç¨‹

```
å¼€å‘ â†’ æµ‹è¯• â†’ æ„å»º â†’ ç‰ˆæœ¬ç®¡ç† â†’ npmå‘å¸ƒ â†’ éªŒè¯
```

### æ ¸å¿ƒç»„ä»¶
1. **npmå‘å¸ƒè„šæœ¬** - è‡ªåŠ¨åŒ–å‘å¸ƒåˆ°npm
2. **åŒ…é…ç½®** - package.jsoné…ç½®ä¼˜åŒ–
3. **è®¤è¯ç®¡ç†** - npmä»¤ç‰Œå’Œå®‰å…¨é…ç½®
4. **ç‰ˆæœ¬ç®¡ç†** - è‡ªåŠ¨åŒ–ç‰ˆæœ¬æ§åˆ¶

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### å‡†å¤‡npmå‘å¸ƒ
```bash
# 1. åˆ›å»ºnpmè´¦æˆ·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# è®¿é—®: https://www.npmjs.com/signup

# 2. ç™»å½•npm
npm login

# 3. åˆ›å»ºnpmä»¤ç‰Œ
npm token create

# 4. è®¾ç½®ç¯å¢ƒå˜é‡
export NPM_TOKEN=ä½ çš„npmä»¤ç‰Œ
```

### å‘å¸ƒæŠ€èƒ½åˆ°npm
```bash
# å®Œæ•´å‘å¸ƒæµç¨‹
npm run deploy

# æˆ–åˆ†æ­¥å‘å¸ƒ
npm run build          # æ„å»º
npm test              # æµ‹è¯•
npm run release       # ç‰ˆæœ¬ç®¡ç†
npm run publish:npm   # å‘å¸ƒåˆ°npm
```

### å‘å¸ƒé€‰é¡¹
```bash
# æ ‡å‡†å‘å¸ƒï¼ˆlatestæ ‡ç­¾ï¼‰
npm run publish:npm

# æµ‹è¯•ç‰ˆå‘å¸ƒï¼ˆbetaæ ‡ç­¾ï¼‰
npm run publish:npm -- --beta

# å¼ºåˆ¶å‘å¸ƒï¼ˆè¦†ç›–ç°æœ‰ç‰ˆæœ¬ï¼‰
npm run publish:npm -- --force

# æ¨¡æ‹Ÿè¿è¡Œï¼ˆä¸å®é™…å‘å¸ƒï¼‰
npm run publish:npm -- --dry-run --verbose
```

## ğŸ“ åŒ…é…ç½®

### package.jsonå…³é”®é…ç½®
```json
{
  "name": "clawdbot-skill-{skill-name}",
  "version": "1.0.0",
  "description": "æŠ€èƒ½æè¿°",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "files": [
    "dist/**/*",
    "src/**/*.ts",
    "README.md",
    "LICENSE",
    "SKILL.md"
  ],
  "publishConfig": {
    "access": "public",
    "registry": "https://registry.npmjs.org/"
  },
  "keywords": [
    "clawdbot",
    "skill",
    "automation"
  ]
}
```

### å¿…éœ€å­—æ®µè¯´æ˜
- **name**: åŒ…åç§°ï¼Œå»ºè®®ä»¥`clawdbot-skill-`å¼€å¤´
- **version**: éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer)
- **main**: å…¥å£æ–‡ä»¶ï¼ŒæŒ‡å‘æ„å»ºåçš„distç›®å½•
- **types**: TypeScriptç±»å‹å£°æ˜æ–‡ä»¶
- **files**: å‘å¸ƒåˆ°npmçš„æ–‡ä»¶åˆ—è¡¨
- **publishConfig**: å‘å¸ƒé…ç½®ï¼Œç¡®ä¿åŒ…ä¸ºå…¬å¼€

## ğŸ”’ å®‰å…¨é…ç½®

### npmä»¤ç‰Œç®¡ç†
```bash
# åˆ›å»ºä»¤ç‰Œ
npm token create --read-write

# æŸ¥çœ‹ä»¤ç‰Œåˆ—è¡¨
npm token list

# æ’¤é”€ä»¤ç‰Œ
npm token revoke <token-id>
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# è®¾ç½®npmä»¤ç‰Œç¯å¢ƒå˜é‡
export NPM_TOKEN=npm_xxxxxxxxxxxxxxxx

# æ°¸ä¹…ä¿å­˜åˆ°shellé…ç½®æ–‡ä»¶
echo 'export NPM_TOKEN=npm_xxxxxxxxxxxxxxxx' >> ~/.bashrc
source ~/.bashrc
```

### .npmrcé…ç½®
```bash
# é¡¹ç›®çº§.npmrc
//registry.npmjs.org/:_authToken=${NPM_TOKEN}
```

## ğŸ§ª å‘å¸ƒå‰æ£€æŸ¥

### è‡ªåŠ¨æ£€æŸ¥é¡¹
å‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

1. **åŒ…æœ‰æ•ˆæ€§**
   - package.jsonå¿…éœ€å­—æ®µ
   - ç‰ˆæœ¬å·æ ¼å¼
   - åŒ…åç§°è§„èŒƒ

2. **æ„å»ºçŠ¶æ€**
   - distç›®å½•å­˜åœ¨
   - ä¸»æ–‡ä»¶å¯è®¿é—®
   - ç±»å‹å£°æ˜æ–‡ä»¶

3. **æµ‹è¯•çŠ¶æ€**
   - æ‰€æœ‰æµ‹è¯•é€šè¿‡
   - æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡

4. **registryçŠ¶æ€**
   - åŒ…æ˜¯å¦å·²å­˜åœ¨
   - ç‰ˆæœ¬æ˜¯å¦å†²çª
   - å‘å¸ƒæƒé™éªŒè¯

### æ‰‹åŠ¨æ£€æŸ¥æ¸…å•
```bash
# 1. ç‰ˆæœ¬å·æ£€æŸ¥
cat package.json | grep version

# 2. æ„å»ºæ£€æŸ¥
npm run build
ls -la dist/

# 3. æµ‹è¯•æ£€æŸ¥
npm test

# 4. åŒ…å†…å®¹æ£€æŸ¥
npm pack --dry-run
```

## ğŸ“¦ å‘å¸ƒæµç¨‹è¯¦è§£

### æ­¥éª¤1: ç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# æ£€æŸ¥åŒ…åç§°
cat package.json | grep name

# æ£€æŸ¥æ„å»ºçŠ¶æ€
ls -la dist/
```

### æ­¥éª¤2: åŒ…æœ‰æ•ˆæ€§æ£€æŸ¥
- âœ… package.jsonå¿…éœ€å­—æ®µå®Œæ•´
- âœ… ç‰ˆæœ¬å·ç¬¦åˆSemVerè§„èŒƒ
- âœ… åŒ…åç§°ä»¥`clawdbot-skill-`å¼€å¤´
- âœ… è®¸å¯è¯æ–‡ä»¶å­˜åœ¨

### æ­¥éª¤3: npm registryæ£€æŸ¥
- âœ… åŒ…æ˜¯å¦å·²å­˜åœ¨
- âœ… ç‰ˆæœ¬æ˜¯å¦å†²çª
- âœ… å‘å¸ƒæƒé™éªŒè¯

### æ­¥éª¤4: å‘å¸ƒå‰æ£€æŸ¥
- âœ… è¿è¡Œæ‰€æœ‰æµ‹è¯•
- âœ… æ„å»ºé¡¹ç›®
- âœ… æ£€æŸ¥æ„å»ºè¾“å‡º

### æ­¥éª¤5: å‘å¸ƒåˆ°npm
```bash
# å®é™…å‘å¸ƒå‘½ä»¤
npm publish --access public --tag latest
```

### æ­¥éª¤6: å‘å¸ƒéªŒè¯
- âœ… ç­‰å¾…registryæ›´æ–°
- âœ… éªŒè¯ç‰ˆæœ¬å·²å‘å¸ƒ
- âœ… æ£€æŸ¥dist-tags

### æ­¥éª¤7: å…ƒæ•°æ®æ›´æ–°ï¼ˆå¯é€‰ï¼‰
- âœ… æ›´æ–°åŒ…æè¿°
- âœ… æ·»åŠ å…³é”®è¯
- âœ… è®¾ç½®ä¸»é¡µé“¾æ¥

### æ­¥éª¤8: æ¸…ç†å’Œé€šçŸ¥
- âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- âœ… ç”Ÿæˆå‘å¸ƒæŠ¥å‘Š
- âœ… å‘é€é€šçŸ¥

## ğŸ·ï¸ ç‰ˆæœ¬ç®¡ç†å’Œæ ‡ç­¾

### è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer)
```bash
# ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
MAJOR.MINOR.PATCH

# ç¤ºä¾‹
1.0.0    # åˆå§‹ç‰ˆæœ¬
1.0.1    # bugä¿®å¤
1.1.0    # æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
2.0.0    # é‡å¤§å˜æ›´ï¼Œä¸å‘åå…¼å®¹
```

### å‘å¸ƒæ ‡ç­¾
```bash
# latest - ç¨³å®šç‰ˆï¼ˆé»˜è®¤ï¼‰
npm publish --tag latest

# beta - æµ‹è¯•ç‰ˆ
npm publish --tag beta

# next - é¢„è§ˆç‰ˆ
npm publish --tag next

# å®‰è£…ç‰¹å®šæ ‡ç­¾
npm install clawdbot-skill-name@beta
```

### è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†
```bash
# æ ‡å‡†ç‰ˆæœ¬å‘å¸ƒï¼ˆåŸºäºæäº¤ä¿¡æ¯ï¼‰
npm run release

# æŒ‡å®šç‰ˆæœ¬ç±»å‹
npm run release:patch    # 1.0.0 â†’ 1.0.1
npm run release:minor    # 1.0.0 â†’ 1.1.0
npm run release:major    # 1.0.0 â†’ 2.0.0
```

## ğŸ”„ æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²

### GitHub Actionsé…ç½®
```yaml
# .github/workflows/ci.yml
- name: Publish to npm
  run: npm publish
  env:
    NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```

### è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
1. **ä»£ç æ¨é€åˆ°mainåˆ†æ”¯**
2. **è‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œæ„å»º**
3. **è‡ªåŠ¨åˆ›å»ºGitHub Release**
4. **è‡ªåŠ¨å‘å¸ƒåˆ°npm**
5. **è‡ªåŠ¨æ›´æ–°æ–‡æ¡£**

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### é—®é¢˜1: npmä»¤ç‰Œæ— æ•ˆ
```bash
é”™è¯¯: æœªæ‰¾åˆ°npmä»¤ç‰Œ
```
**è§£å†³æ–¹æ¡ˆ**:
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export NPM_TOKEN=ä½ çš„npmä»¤ç‰Œ

# æˆ–åˆ›å»º.npmrcæ–‡ä»¶
echo "//registry.npmjs.org/:_authToken=ä½ çš„ä»¤ç‰Œ" > .npmrc
```

#### é—®é¢˜2: åŒ…åç§°å·²å­˜åœ¨
```bash
é”™è¯¯: åŒ…åç§°å·²å­˜åœ¨
```
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ›´æ”¹åŒ…åç§°
# ä¿®æ”¹package.jsonä¸­çš„nameå­—æ®µ

# 2. ä½¿ç”¨ä½œç”¨åŸŸåŒ…
@your-username/clawdbot-skill-name

# 3. æ£€æŸ¥æ˜¯å¦æ˜¯ä½ çš„åŒ…
npm owner ls clawdbot-skill-name
```

#### é—®é¢˜3: æƒé™ä¸è¶³
```bash
é”™è¯¯: æ²¡æœ‰å‘å¸ƒæƒé™
```
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. ç™»å½•npm
npm login

# 2. æ£€æŸ¥åŒ…æ‰€æœ‰è€…
npm owner ls clawdbot-skill-name

# 3. è¯·æ±‚æ·»åŠ ä¸ºæ‰€æœ‰è€…
npm owner add your-username clawdbot-skill-name
```

#### é—®é¢˜4: ç‰ˆæœ¬å·²å­˜åœ¨
```bash
é”™è¯¯: ç‰ˆæœ¬å·²å­˜åœ¨
```
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version patch

# 2. å¼ºåˆ¶å‘å¸ƒï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
npm run publish:npm -- --force
```

## ğŸš€ æœ€ä½³å®è·µ

### å‘å¸ƒå‰æ£€æŸ¥æ¸…å•
1. âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
2. âœ… æ„å»ºæˆåŠŸ
3. âœ… ç‰ˆæœ¬å·å·²æ›´æ–°
4. âœ… CHANGELOGå·²æ›´æ–°
5. âœ… æ–‡æ¡£å·²æ›´æ–°
6. âœ… ä¾èµ–å·²æ›´æ–°
7. âœ… è®¸å¯è¯æ–‡ä»¶å­˜åœ¨

### å‘å¸ƒåéªŒè¯
1. âœ… npmé¡µé¢å¯è®¿é—®
2. âœ… åŒ…å¯å®‰è£…
3. âœ… ç±»å‹å£°æ˜å·¥ä½œæ­£å¸¸
4. âœ… ç¤ºä¾‹ä»£ç å¯è¿è¡Œ
5. âœ… æ–‡æ¡£é“¾æ¥æ­£ç¡®

### ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
1. **ä¸»ç‰ˆæœ¬** (MAJOR): ä¸å…¼å®¹çš„APIå˜æ›´
2. **æ¬¡ç‰ˆæœ¬** (MINOR): å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
3. **ä¿®è®¢å·** (PATCH): å‘åå…¼å®¹çš„bugä¿®å¤
4. **é¢„å‘å¸ƒç‰ˆæœ¬**: ä½¿ç”¨æ ‡ç­¾ç®¡ç† (beta, next)

### å®‰å…¨è€ƒè™‘
1. **ä»¤ç‰Œå®‰å…¨**: ä¸è¦æäº¤ä»¤ç‰Œåˆ°ç‰ˆæœ¬æ§åˆ¶
2. **ä¾èµ–å®¡è®¡**: å®šæœŸè¿è¡Œ`npm audit`
3. **æƒé™ç®¡ç†**: æœ€å°æƒé™åŸåˆ™
4. **å¤‡ä»½ç­–ç•¥**: é‡è¦ç‰ˆæœ¬å¤‡ä»½

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### åŒ…ä½¿ç”¨ç»Ÿè®¡
```bash
# æŸ¥çœ‹åŒ…ä¸‹è½½ç»Ÿè®¡
npm stats clawdbot-skill-name

# æŸ¥çœ‹ç‰ˆæœ¬åˆ†å¸ƒ
npm view clawdbot-skill-name versions
```

### ä¾èµ–æ›´æ–°
```bash
# æ£€æŸ¥è¿‡æ—¶ä¾èµ–
npm outdated

# æ›´æ–°ä¾èµ–
npm update

# å®‰å…¨å®¡è®¡
npm audit
npm audit fix
```

### åŒ…ç»´æŠ¤
```bash
# æ·»åŠ ç»´æŠ¤è€…
npm owner add username clawdbot-skill-name

# ç§»é™¤ç»´æŠ¤è€…
npm owner rm username clawdbot-skill-name

# å¼ƒç”¨åŒ…
npm deprecate clawdbot-skill-name@1.0.0 "è¯·å‡çº§åˆ°2.0.0"
```

## ğŸ“ æ”¯æŒ

### è·å–å¸®åŠ©
- **npmæ–‡æ¡£**: https://docs.npmjs.com/
- **é—®é¢˜è·Ÿè¸ª**: GitHub Issues
- **ç¤¾åŒºæ”¯æŒ**: Clawdbotç¤¾åŒº

### ç´§æ€¥æƒ…å†µ
1. **æ’¤é”€å‘å¸ƒ**: è”ç³»npmæ”¯æŒ
2. **å®‰å…¨æ¼æ´**: ç«‹å³å‘å¸ƒä¿®å¤ç‰ˆæœ¬
3. **ä»¤ç‰Œæ³„éœ²**: ç«‹å³æ’¤é”€æ‰€æœ‰ä»¤ç‰Œ

---

**é€šè¿‡npmå‘å¸ƒï¼Œä½ çš„æŠ€èƒ½å¯ä»¥è¢«å…¨çƒå¼€å‘è€…ä½¿ç”¨ï¼** ğŸŒ